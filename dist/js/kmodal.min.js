function Kmodal(e,t){var o={init:!0,escClose:!0,overlayClose:!0,effect:"fadeInTop",transition:".4s",hashOpen:!1,youtube:{id:0,autoplay:0,rel:1,controls:1,showinfo:1},on:{open:"",close:""},thisOpenElem:""},n={status:!1,youtubeSettings:{link:function(e){return"https://www.youtube.com/embed/"+e+"?autoplay="+o.youtube.autoplay+"&amp;rel="+o.youtube.rel+"&amp;controls="+o.youtube.controls+"&amp;showinfo="+o.youtube.showinfo},empty:"//about:blank",markup:'<iframe class="kmodal-youtube-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe>'}};this.modal=$(e),this.openEl=$('[data-modal="'+e+'"]'),this.closeEl=$(Selectors.closeEl,this.modal),this.content=$($(Selectors.content).children(),this.modal),this._events_open=[],this._events_close=[],this.options=$.extend(o,t,n),"object"==typeof t&&"object"==typeof t.on&&("function"==typeof t.on.open&&this._events_open.push(t.on.open),"function"==typeof t.on.close&&this._events_close.push(t.on.close)),this.options.init&&this.init()}var Events={CLICK:"click",KEY_DOWN:"keydown",MOUSE_UP:"mouseup",OPEN:"open",CLOSE:"close"},ClassList={ACTIVE:"modal_active",BODY_ACTIVE:"modal-open",SCALE:"modal__content--scale",FADEINTOP:"modal__content--fadeInTop"},Selectors={b:$("body"),d:$(document),modal:".modal",content:".modal__content",closeEl:'[data-role="modal-close"]',youtubeIframe:".kmodal-youtube-iframe"};Kmodal.prototype.init=function(){var e=this;if($(e.openEl).on(Events.CLICK,function(){console.log(this),e.open(this)}),$(e.closeEl).on(Events.CLICK,function(){e.close()}),e.options.hashOpen){var t=window.location.href,t=t.split("#");e.modal.attr("id")===t[1]&&e.open()}0!==e.options.youtube.id&&(e.on(Events.OPEN,function(){$(Selectors.content,e.modal).append(e.options.youtubeSettings.markup),$(Selectors.youtubeIframe,e.modal).attr("src",e.options.youtubeSettings.link(e.options.youtube.id))}),e.on(Events.CLOSE,function(){$(Selectors.youtubeIframe,e.modal).remove()})),""!==e.options.transition&&e.content.css({transition:this.options.transition}),"scale"===e.options.effect&&e.content.addClass(ClassList.SCALE),"fadeInTop"===e.options.effect&&e.content.addClass(ClassList.FADEINTOP),e.options.escClose&&Selectors.d.on(Events.KEY_DOWN,function(t){27===t.keyCode&&e.options.status&&e.close()}),e.options.overlayClose&&Selectors.d.on(Events.MOUSE_UP,function(t){e.options.status&&($(e.content).is(t.target)||0!==$(e.content).has(t.target).length||e.close())})},Kmodal.prototype.open=function(e){$(Selectors.modal).removeClass(ClassList.ACTIVE),this.modal.addClass(ClassList.ACTIVE),Selectors.b.addClass(ClassList.BODY_ACTIVE),Selectors.d.outerHeight()>$(window).outerHeight()&&Selectors.b.css("padding-right",this.scrollBarWidth),this.options.status=!0,this.options.thisOpenElem=e,this._events_open.map(function(e){e()})},Kmodal.prototype.close=function(){this.modal.removeClass(ClassList.ACTIVE),Selectors.b.removeClass(ClassList.BODY_ACTIVE).css("padding-right",""),this.options.status=!1,this._events_close.map(function(e){e()})},Kmodal.prototype.scrollBarWidth=function(){var e=$("<div>").css({height:"50px",width:"50px"}),t=$("<div>").css({height:"200px"}),o="";return Selectors.b.append(e.append(t)),o=$("div",e).innerWidth(),e.css("overflow-y","scroll"),o-=$("div",e).innerWidth(),$(e).remove(),o+"px"},Kmodal.prototype.status=function(){return this.options.status},Kmodal.prototype.getSelector=function(){return this.options.thisOpenElem},Kmodal.prototype.on=function(e,t){switch(e){case"open":this._events_open.push(t);break;case"close":this._events_close.push(t)}};