function Kmodal(t,o){var e={init:!0,escClose:!0,overlayClose:!0,effect:"fadeInTop",transition:".4s",paddingElements:"",hashOpen:!1,youtube:{id:0,autoplay:0,rel:1,controls:1,showinfo:1},on:{open:function(){},close:function(){}},thisOpenElem:""},s={status:!1,youtubeSettings:{link:function(t){return"https://www.youtube.com/embed/"+t+"?autoplay="+e.youtube.autoplay+"&amp;rel="+e.youtube.rel+"&amp;controls="+e.youtube.controls+"&amp;showinfo="+e.youtube.showinfo},empty:"//about:blank",markup:'<iframe class="kmodal-youtube-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe>'}};this.modal=$(t),this.openEl=$('[data-modal="'+t+'"]'),this.closeEl=$(Selectors.closeEl,this.modal),this.content=$($(Selectors.content).children(),this.modal),this._events_open=[],this._events_close=[],this.options=$.extend(e,o,s),"object"==typeof o&&"object"==typeof o.on&&("function"==typeof o.on.open&&this._events_open.push(o.on.open),"function"==typeof o.on.close&&this._events_close.push(o.on.close)),this.options.init&&this.init()}var Events={CLICK:"click",KEY_DOWN:"keydown",MOUSE_UP:"mouseup",OPEN:"open",CLOSE:"close"},ClassList={ACTIVE:"modal_active",BODY_ACTIVE:"modal-open",SCALE:"modal__content--scale",FADEINTOP:"modal__content--fadeInTop"},Selectors={b:$("body"),d:$(document),modal:".modal",content:".modal__content",closeEl:'[data-role="modal-close"]',youtubeIframe:".kmodal-youtube-iframe"};Kmodal.prototype.init=function(){var t=this;if($(t.openEl).on(Events.CLICK,function(){t.open(this)}),$(t.closeEl).on(Events.CLICK,function(){t.close()}),t.options.hashOpen){var o=window.location.href,o=o.split("#");t.modal.attr("id")===o[1]&&t.open()}0!==t.options.youtube.id&&(t.on(Events.OPEN,function(){$(Selectors.content,t.modal).append(t.options.youtubeSettings.markup),$(Selectors.youtubeIframe,t.modal).attr("src",t.options.youtubeSettings.link(t.options.youtube.id))}),t.on(Events.CLOSE,function(){$(Selectors.youtubeIframe,t.modal).remove()})),""!==t.options.transition&&t.content.css({transition:this.options.transition}),"scale"===t.options.effect&&t.content.addClass(ClassList.SCALE),"fadeInTop"===t.options.effect&&t.content.addClass(ClassList.FADEINTOP),t.options.escClose&&Selectors.d.on(Events.KEY_DOWN,function(o){27===o.keyCode&&t.options.status&&t.close()}),t.options.overlayClose&&Selectors.d.on(Events.MOUSE_UP,function(o){t.options.status&&($(t.content).is(o.target)||0!==$(t.content).has(o.target).length||t.close())})},Kmodal.prototype.open=function(t){$(Selectors.modal).removeClass(ClassList.ACTIVE),this.modal.addClass(ClassList.ACTIVE),Selectors.b.addClass(ClassList.BODY_ACTIVE),Selectors.d.outerHeight()>$(window).outerHeight()&&(Selectors.b.css("padding-right",this.scrollBarWidth),$(this.options.paddingElements).css("padding-right",this.scrollBarWidth)),this.options.status=!0,this.options.thisOpenElem=t,this._events_open.map(function(t){t()})},Kmodal.prototype.close=function(){this.modal.removeClass(ClassList.ACTIVE),Selectors.b.removeClass(ClassList.BODY_ACTIVE).css("padding-right",""),$(this.options.paddingElements).css("padding-right",""),this.options.status=!1,this._events_close.map(function(t){t()})},Kmodal.prototype.scrollBarWidth=function(){var t=$("<div>").css({height:"50px",width:"50px"}),o=$("<div>").css({height:"200px"}),e="";return Selectors.b.append(t.append(o)),e=$("div",t).innerWidth(),t.css("overflow-y","scroll"),e-=$("div",t).innerWidth(),$(t).remove(),e+"px"},Kmodal.prototype.status=function(){return this.options.status},Kmodal.prototype.getSelector=function(){return this.options.thisOpenElem},Kmodal.prototype.on=function(t,o){switch(t){case"open":this._events_open.push(o);break;case"close":this._events_close.push(o)}};