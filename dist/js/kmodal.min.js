function Kmodal(o,t){var e={init:!0,escClose:!0,overlayClose:!0,effect:"fadeInTop",transition:".4s",hashOpen:!1,youtube:{id:0,autoplay:0,rel:1,controls:1,showinfo:1},on:{open:function(){},close:function(){}},thisOpenElem:""},s={status:!1,youtubeSettings:{link:function(o){return"https://www.youtube.com/embed/"+o+"?autoplay="+e.youtube.autoplay+"&amp;rel="+e.youtube.rel+"&amp;controls="+e.youtube.controls+"&amp;showinfo="+e.youtube.showinfo},empty:"//about:blank",markup:'<iframe class="kmodal-youtube-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe>'}};this.modal=$(o),this.openEl=$('[data-modal="'+o+'"]'),this.closeEl=$(Selectors.closeEl,this.modal),this.content=$($(Selectors.content).children(),this.modal),this._events_open=[],this._events_close=[],this.options=$.extend(e,t,s),"object"==typeof t&&"object"==typeof t.on&&("function"==typeof t.on.open&&this._events_open.push(t.on.open),"function"==typeof t.on.close&&this._events_close.push(t.on.close)),this.options.init&&this.init()}var Events={CLICK:"click",KEY_DOWN:"keydown",MOUSE_UP:"mouseup",OPEN:"open",CLOSE:"close"},ClassList={ACTIVE:"modal_active",BODY_ACTIVE:"modal-open",SCALE:"modal__content--scale",FADEINTOP:"modal__content--fadeInTop"},Selectors={b:$("body"),d:$(document),modal:".modal",content:".modal__content",closeEl:'[data-role="modal-close"]',youtubeIframe:".kmodal-youtube-iframe"};Kmodal.prototype.init=function(){var o=this;if($($(o.openEl).parent()).on(Events.CLICK,o.openEl,function(){o.open(this)}),$(o.closeEl).on(Events.CLICK,function(){o.close()}),o.options.hashOpen){var t=window.location.href,t=t.split("#");o.modal.attr("id")===t[1]&&o.open()}0!==o.options.youtube.id&&(o.on(Events.OPEN,function(){$(Selectors.content,o.modal).append(o.options.youtubeSettings.markup),$(Selectors.youtubeIframe,o.modal).attr("src",o.options.youtubeSettings.link(o.options.youtube.id))}),o.on(Events.CLOSE,function(){$(Selectors.youtubeIframe,o.modal).remove()})),""!==o.options.transition&&o.content.css({transition:this.options.transition}),"scale"===o.options.effect&&o.content.addClass(ClassList.SCALE),"fadeInTop"===o.options.effect&&o.content.addClass(ClassList.FADEINTOP),o.options.escClose&&Selectors.d.on(Events.KEY_DOWN,function(t){27===t.keyCode&&o.options.status&&o.close()}),o.options.overlayClose&&Selectors.d.on(Events.MOUSE_UP,function(t){o.options.status&&($(o.content).is(t.target)||0!==$(o.content).has(t.target).length||o.close())})},Kmodal.prototype.open=function(o){$(Selectors.modal).removeClass(ClassList.ACTIVE),this.modal.addClass(ClassList.ACTIVE),Selectors.b.addClass(ClassList.BODY_ACTIVE),Selectors.d.outerHeight()>$(window).outerHeight()&&Selectors.b.css("padding-right",this.scrollBarWidth),this.options.status=!0,this.options.thisOpenElem=o,this._events_open.map(function(o){o()})},Kmodal.prototype.close=function(){this.modal.removeClass(ClassList.ACTIVE),Selectors.b.removeClass(ClassList.BODY_ACTIVE).css("padding-right",""),this.options.status=!1,this._events_close.map(function(o){o()})},Kmodal.prototype.scrollBarWidth=function(){var o=$("<div>").css({height:"50px",width:"50px"}),t=$("<div>").css({height:"200px"}),e="";return Selectors.b.append(o.append(t)),e=$("div",o).innerWidth(),o.css("overflow-y","scroll"),e-=$("div",o).innerWidth(),$(o).remove(),e+"px"},Kmodal.prototype.status=function(){return this.options.status},Kmodal.prototype.getSelector=function(){return this.options.thisOpenElem},Kmodal.prototype.on=function(o,t){switch(o){case"open":this._events_open.push(t);break;case"close":this._events_close.push(t)}};